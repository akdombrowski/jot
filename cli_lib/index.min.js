#!/usr/bin/env node
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.cli=exports.HELP_TEXT=void 0;var _index=require("../src/index.js");function asyncGeneratorStep(r,e,o,n,t,a,c){try{var i=r[a](c),l=i.value}catch(r){return void o(r)}i.done?e(l):Promise.resolve(l).then(n,t)}function _asyncToGenerator(r){return function(){var e=this,o=arguments;return new Promise((function(n,t){var a=r.apply(e,o);function c(r){asyncGeneratorStep(a,n,t,c,i,"next",r)}function i(r){asyncGeneratorStep(a,n,t,c,i,"throw",r)}c(void 0)}))}}function _getRequireWildcardCache(r){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(_getRequireWildcardCache=function(r){return r?o:e})(r)}function _interopRequireWildcard(r,e){if(!e&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var o=_getRequireWildcardCache(e);if(o&&o.has(r))return o.get(r);var n={__proto__:null},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in r)if("default"!==a&&Object.prototype.hasOwnProperty.call(r,a)){var c=t?Object.getOwnPropertyDescriptor(r,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=r[a]}return n.default=r,o&&o.set(r,n),n}var clipboard,clipboardy=Promise.resolve().then((()=>_interopRequireWildcard(require("clipboardy")))),GENERIC_ERROR_CODE=1,decode=function(){var r=_asyncToGenerator((function*(r){try{return yield(0,_index.jwtDecode)(r)}catch(r){throw r}}));return function(e){return r.apply(this,arguments)}}(),HELP_TEXT=exports.HELP_TEXT="******HELP*****\nuse -c or --clipboard or call command with no arguments to decode the JWT in your clipboard\nor call command with JWT as first argument\n****************",cli=exports.cli=function(){var r=_asyncToGenerator((function*(r,e){var o,n;if(e&&(o=e[2],n=e[3]),"-h"==o||"--help"===o)return console.log(HELP_TEXT),HELP_TEXT;if("-c"!==o&&"--clipboard"!==o&&o)if("-b"===o||"--base64url"===o){if(!n)return console.error("I found an error :("),console.error("No argument passed in to encode."),GENERIC_ERROR_CODE;try{var t=(0,_index.base64URLEncode)(n);return console.log(t),t}catch(r){console.error("I found an error :("),console.error("base64url encoding failed:",r.message)}}else if(o)try{var a=(0,_index.jwtDecode)(o);console.log("Decoding: \n"+o),console.log(a)}catch(r){console.error("I found an error :(."),console.error(r.message)}else console.error("I found an error :(."),console.error("Nothing in clipboard and no arguments given. Pass in a JWT as the first argument or copy a JWT to your clipboard");else{if(!r)return console.error("I found an error :("),console.error("Didn't find anything in your clipboard."),GENERIC_ERROR_CODE;try{console.log("Decoding: "),console.log(r);var c=yield decode(r);return console.log(c),c}catch(e){return console.error("I found an error :("),console.error("Couldn't decode what was in your clipboard. You might try copying the JWT again."),console.error("What's the problem? "),console.error(" ",e.message),console.error("What's on your clipboard? "),console.error(" ",r),GENERIC_ERROR_CODE}}}));return function(e,o){return r.apply(this,arguments)}}();try{clipboard=clipboardy.readSync()}catch(r){clipboard=null}var argv=process.argv;cli(clipboard,argv);var _default=exports.default=cli;