#!/usr/bin/env node
import{jwtDecode}from"../lib";import clipboardy from"clipboardy";const decode=async o=>await jwtDecode(o);export const HELP_TEXT="******HELP*****\nuse -c or --clipboard or call command with no arguments to decode the JWT in your clipboard\nor call command with JWT as first argument\n****************";export const cli=async(o,r)=>{let e;if(r&&(e=r[2]),"-h"==e||"--help"===e)return console.log(HELP_TEXT),HELP_TEXT;if("-c"!==e&&"--clipboard"!==e&&e)if(e)try{const o=jwtDecode(e);return console.log("Decoding: \n"+e),console.log(o),o}catch(o){console.error("I found an error :(."),console.error(o,o.message)}else console.error("I found an error :(."),console.error("Nothing in clipboard and no arguments given. Pass in a JWT as the first argument or copy a JWT to your clipboard");else if(o)try{const r=await decode(o);return console.log("Decoding: "),console.log(o),console.log(r),r}catch(r){console.error("I found an error :(."),console.error("Couldn't decode what was in clipboard. Pass in a JWT as the first argument or copy a JWT to your clipboard"),console.error("what's on your clipboard? "),console.error(o),console.error(r,r.message)}else console.error("I found an error :(."),console.error("Nothing in clipboard. Pass in a JWT as the first argument or copy a JWT to your clipboard");return 1};let clipboard;try{clipboard=clipboardy.readSync()}catch(o){clipboard=null}const argv=process.argv;cli(clipboard,argv);export default cli;
