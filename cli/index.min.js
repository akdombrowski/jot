#!/usr/bin/env node
import{jwtDecode}from"../lib";import clipboardy from"clipboardy";const clipboard=clipboardy.readSync(),arg2=process.argv[2],decode=async o=>await jwtDecode(o),cli=async(o,r)=>{if("-h"==r||"--help"===r)console.log("use -c or --clipboard or call command with no arguments to decode the JWT in you clipboard"),console.log("or call command with JWT as first argument");else if("-c"!==r&&"--clipboard"!==r&&r)if(r)try{console.log("Decoding: \n"+r),console.log(jwtDecode(r))}catch(o){console.error("I found an error :(."),console.error(o,o.message)}else console.error("I found an error :(."),console.error("Nothing in clipboard and no arguments given. Pass in a JWT as the first argument or copy a JWT to your clipboard");else if(o)try{const r=await decode(o);console.log("Decoding: \n"+o),console.log(r)}catch(r){console.error("I found an error :(."),console.error("Couldn't decode what was in clipboard. Pass in a JWT as the first argument or copy a JWT to clipboard"),console.error("what's on your clipboard? "),console.error(o),console.error(r,r.message)}else console.error("I found an error :(."),console.error("Nothing in clipboard. Pass in a JWT as the first argument or copy a JWT to your clipboard")};cli(clipboard,arg2);
